<div class="page-container">
  <header class="page-header">
    <div>
      <h1 class="title">Mis Vacantes Publicadas</h1>
      <p class="subtitle">Gestiona tus ofertas activas y cerradas.</p>
    </div>
    <button routerLink="/publicar-vacante" class="btn-create">
      <app-icon name="Plus"></app-icon> Nueva Vacante
    </button>
  </header>

  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando ofertas...</p>
  </div>

  <div *ngIf="!loading && vacantes.length === 0" class="empty-state">
    <div class="empty-icon">
      <app-icon name="FolderOpen"></app-icon>
    </div>
    <h3>No tienes vacantes publicadas</h3>
    <p>Comienza a buscar talento creando tu primera oferta.</p>
    <button routerLink="/publicar-vacante" class="btn-primary">Crear Primera Oferta</button>
  </div>

  <div *ngIf="!loading && vacantes.length > 0" class="jobs-grid">
    <div *ngFor="let job of vacantes" class="job-card">
      <div class="card-header">
        <span class="job-role">{{ job.titulo_cargo }}</span>
        <!-- ðŸ‘‡ CAMBIA ESTA LÃNEA -->
        <span class="status-badge" [ngClass]="obtenerEstadoClase(job.estado_aprobacion)">
          {{ obtenerEstadoTexto(job.estado_aprobacion) }}
        </span>
      </div>

      <div class="card-body">
        <p class="location">
          <span class="icon-text"><app-icon name="MapPin"></app-icon></span>
          {{ job.ubicacion }} â€¢ {{ job.tipo_trabajo }}
        </p>
        <p class="salary">
          <span class="icon-text"><app-icon name="CurrencyDollar"></app-icon></span>
          ${{ job.salario_min }} - ${{ job.salario_max }}
        </p>
        <p class="desc">{{ job.descripcion_vacante | slice : 0 : 100 }}...</p>
      </div>

      <div class="card-footer">
        <span class="date">Publicado: {{ job.fecha_publicacion | date : 'mediumDate' }}</span>
        <div class="actions">
          <button class="btn-icon edit" (click)="editar(job.id_vacante)" title="Editar">
            <app-icon name="Pencil"></app-icon>
          </button>
          <button class="btn-icon delete" (click)="eliminar(job.id_vacante)" title="Eliminar">
            <app-icon name="Trash"></app-icon>
          </button>
          <button
            [routerLink]="['/ver-candidatos', job.id_vacante]"
            class="btn-candidates"
            title="Ver Candidatos"
          >
            <app-icon name="Users"></app-icon> Candidatos
          </button>
        </div>
      </div>
    </div>
  </div>

  <div style="margin-top: 40px">
    <a routerLink="/dashboard-empresa" class="back-link">
      <span class="icon-text"><app-icon name="ArrowLeft"></app-icon></span> Volver al Dashboard
    </a>
  </div>
</div>
