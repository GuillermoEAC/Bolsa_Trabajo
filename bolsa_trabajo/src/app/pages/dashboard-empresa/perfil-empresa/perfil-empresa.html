<div class="perfil-container">
  <h2><app-icon name="Building"></app-icon> Editar Perfil de Empresa</h2>

  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    Cargando datos...
  </div>

  <form *ngIf="!loading" (ngSubmit)="guardarCambios()" class="form-grid">
    <div class="logo-section">
      <div class="logo-wrapper">
        <img
          [src]="construirUrlImagen(perfil.logo_path)"
          onerror="this.src='assets/img/default-company.png'"
          alt="Logo Empresa"
        />
      </div>
      <label class="btn-upload">
        <app-icon name="Camera"></app-icon> Cambiar Logo
        <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden />
      </label>
    </div>

    <div class="form-group full-width">
      <label>Nombre Comercial</label>
      <input type="text" [(ngModel)]="perfil.nombre_empresa" name="nombre" required />
    </div>

    <div class="form-group">
      <label>Razón Social</label>
      <input type="text" [(ngModel)]="perfil.razon_social" name="razon" />
    </div>

    <div class="form-group">
      <label>NIT / RFC</label>
      <input type="text" [(ngModel)]="perfil.nit" name="nit" />
    </div>

    <div class="form-group">
      <label>Email de Contacto</label>
      <input type="email" [(ngModel)]="perfil.email_contacto" name="email" />
    </div>

    <div class="form-group">
      <label>Sitio Web</label>
      <input type="text" [(ngModel)]="perfil.sitio_web" name="web" placeholder="https://..." />
    </div>

    <div class="form-group full-width">
      <label>Descripción de la Empresa</label>
      <textarea
        [(ngModel)]="perfil.descripcion"
        name="desc"
        rows="4"
        placeholder="¿Qué hace tu empresa?"
      ></textarea>
    </div>

    <div class="actions full-width">
      <button type="submit" class="btn-save" [disabled]="guardando">
        <span *ngIf="guardando" class="spinner-mini"></span>
        {{ guardando ? 'Guardando...' : 'Guardar Cambios' }}
      </button>
    </div>
  </form>
</div>
